# Сессия 1 — Проектирование ER-диаграммы и базы данных

## Описание работы


В рамках работы были выполнены следующие этапы:
- анализ предметной области;
- проектирование ER-диаграммы в 3-й нормальной форме;
- создание структуры базы данных на основе диаграммы;
- импорт предоставленных данных в таблицы;
- проверка ссылочной целостности и корректности данных.


---
## Основные сущности базы данных:

| Таблица | Назначение |
|----------|------------|
| **agent** | Сведения об агентах-покупателях: компания, ИНН, контакты, приоритет |
| **agentproductsale** | Информация о продажах (агент, продукт, дата, количество) |
| **materialtype** | Типы материалов и процент возможного брака |
| **unit** | Единицы измерения (метры, килограммы, литры и т.д.) |
| **material** | Список материалов, их количество, стоимость и характеристики |
| **producttype** | Типы продукции с коэффициентом для расчёта расхода |
| **workshop** | Производственные цеха |
| **product** | Продукция: артикул, наименование, параметры, цена, цех |
| **productmaterial** | Связь "многие-ко-многим" между продукцией и материалами |

---

## Структура таблиц - основные поля

### Таблица `materialtype`
| Поле | Тип | Описание |
|-------|-----|-----------|
| material_type_id | INT | Первичный ключ |
| name | VARCHAR(50) | Наименование типа материала |
| defect_percent | DECIMAL(6,4) | Процент брака |

### Таблица `unit`
| Поле | Тип | Описание |
|-------|-----|-----------|
| unit_id | INT | Первичный ключ |
| name | VARCHAR(16) | Наименование единицы измерения |

### Таблица `material`
| Поле | Тип | Описание |
|-------|-----|-----------|
| material_id | INT | Первичный ключ |
| name | VARCHAR(255) | Наименование материала |
| material_type_id | INT | Тип материала (FK) |
| package_quantity | INT | Количество в упаковке |
| unit_id | INT | Единица измерения (FK) |
| stock_quantity | INT | Количество на складе |
| min_quantity | INT | Минимально допустимый остаток |
| cost | DECIMAL(18,2) | Стоимость |
| description | TEXT | Описание |
| image_path | VARCHAR(255) | Путь к изображению |

### Таблица `product`
| Поле | Тип | Описание |
|-------|-----|-----------|
| product_id | INT | Первичный ключ |
| article | VARCHAR(50) | Уникальный артикул |
| name | VARCHAR(255) | Наименование |
| product_type_id | INT | Тип продукта (FK) |
| workshop_id | INT | Цех (FK) |
| min_agent_price | DECIMAL(18,2) | Минимальная цена для агента |
| people_required | INT | Кол-во человек для производства |
| width | INT | Ширина |
| length | INT | Длина |
| package_height | INT | Высота упаковки |
| weight_net | DECIMAL(12,3) | Вес без упаковки |
| weight_gross | DECIMAL(12,3) | Вес с упаковкой |
| certificate_path | VARCHAR(255) | Путь к сертификату |
| standard_no | VARCHAR(64) | Номер стандарта (ГОСТ, ISO и т.д.) |
| production_time_min | INT | Время производства (минут) |
| cost_price | DECIMAL(18,2) | Себестоимость |
| description | TEXT | Описание |
| image_path | VARCHAR(255) | Изображение |
| is_active | TINYINT(1) | Флаг активности |

### Таблица `productmaterial`
| Поле | Тип | Описание |
|-------|-----|-----------|
| product_id | INT | FK на продукцию |
| material_id | INT | FK на материал |
| quantity | DECIMAL(18,3) | Количество материала |

### Таблица `agent`
| Поле | Тип | Описание |
|-------|-----|-----------|
| agent_id | INT | Первичный ключ |
| company_name | VARCHAR(255) | Название компании |
| legal_adress | VARCHAR(255) | Юридический адрес |
| inn | VARCHAR(32) | ИНН |
| kpp | VARCHAR(32) | КПП |
| director_name | VARCHAR(255) | ФИО директора |
| phone | VARCHAR(64) | Телефон |
| email | VARCHAR(128) | Почта |
| logo_path | VARCHAR(255) | Логотип |
| priority | INT | Приоритет в поставках |
---

## Проверка целостности данных

- Все внешние ключи корректно ссылаются на существующие записи.
- Поле `article` в таблице `product` имеет уникальные значения.
- Поля, связанные с количеством и стоимостью, не содержат отрицательных чисел.
- Связи «многие-ко-многим» реализованы корректно через таблицу `productmaterial`.
---

## Вывод

В результате выполнения **Сессии 1**:
- Разработана и реализована ER-модель в 3-й нормальной форме.
- Создана реляционная база данных `paperdb` в MySQL с полным набором таблиц.
- Выполнен импорт данных из предоставленных файлов.
- Проверена корректность ограничений, связей и данных.
---

**Выполнено:** *ООО "Третья"*
